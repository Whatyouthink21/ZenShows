<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZenShows | Ultra-Wide Cinematic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;700;800&display=swap');
        
        :root { --accent: #10b981; --bg: #020617; --surface: #0f172a; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg); color: #f8fafc; overflow-x: hidden; }

        /* Full-Viewport Hero */
        .hero-tall { height: 90vh; width: 100vw; }
        .hero-overlay { background: linear-gradient(to top, var(--bg) 5%, transparent 40%), 
                                   linear-gradient(to right, var(--bg) 10%, transparent 60%); }

        /* Bento Grid & Card Effects */
        .bento-card { transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1); border: 1px solid rgba(255,255,255,0.03); }
        .bento-card:hover { transform: scale(1.03) translateY(-8px); border-color: var(--accent); box-shadow: 0 20px 40px rgba(0,0,0,0.6); }
        
        /* Immersive Player Mode */
        #playerModal { background: rgba(2, 6, 23, 0.98); backdrop-filter: blur(20px); }
        .theater-container { width: 95%; max-width: 1600px; aspect-ratio: 21/9; margin: 0 auto; box-shadow: 0 0 100px rgba(16, 185, 129, 0.1); border-radius: 24px; overflow: hidden; }
        @media (max-aspect-ratio: 16/9) { .theater-container { aspect-ratio: 16/9; } }

        /* Animations */
        @keyframes slideIn { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
        .animate-slide { animation: slideIn 0.8s ease-out forwards; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }

        /* Source Buttons */
        .src-btn { background: #1e293b; transition: all 0.3s; border: 1px solid rgba(255,255,255,0.05); }
        .src-btn:hover { background: var(--accent); color: #000; font-weight: 800; transform: translateY(-2px); }
        .active-src { background: var(--accent) !important; color: #000 !important; font-weight: 800; }
    </style>
</head>
<body class="custom-scroll">

    <aside class="fixed left-0 top-0 h-full w-20 hover:w-64 transition-all duration-500 bg-[#020617]/80 backdrop-blur-xl z-[100] border-r border-white/5 flex flex-col items-center py-8 overflow-hidden group">
        <div class="mb-12">
            <div class="w-12 h-12 bg-emerald-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/20">
                <i class="fa fa-play text-black text-xl"></i>
            </div>
        </div>
        <nav class="flex flex-col gap-8 w-full px-4">
            <button onclick="fetchNew('trending')" class="flex items-center gap-4 text-emerald-500 group-hover:bg-emerald-500/10 p-3 rounded-xl transition">
                <i class="fa fa-fire text-xl"></i> <span class="hidden group-hover:block font-bold">Trending</span>
            </button>
            <button onclick="fetchNew('movie')" class="flex items-center gap-4 text-gray-400 hover:text-white group-hover:bg-white/5 p-3 rounded-xl transition">
                <i class="fa fa-film text-xl"></i> <span class="hidden group-hover:block font-bold">Movies</span>
            </button>
            <button onclick="fetchNew('tv')" class="flex items-center gap-4 text-gray-400 hover:text-white group-hover:bg-white/5 p-3 rounded-xl transition">
                <i class="fa fa-tv text-xl"></i> <span class="hidden group-hover:block font-bold">TV Shows</span>
            </button>
            <button onclick="showLibrary('watchlist')" class="flex items-center gap-4 text-gray-400 hover:text-white group-hover:bg-white/5 p-3 rounded-xl transition">
                <i class="fa fa-bookmark text-xl"></i> <span class="hidden group-hover:block font-bold">Library</span>
            </button>
        </nav>
    </aside>

    <header class="fixed top-0 left-20 right-0 z-50 px-12 py-6 flex justify-between items-center bg-gradient-to-b from-[#020617] to-transparent">
        <div class="relative w-1/3">
            <i class="fa fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"></i>
            <input type="text" id="searchInput" onkeyup="handleSearch(event)" placeholder="Search for movies, actors, or directors..." 
                class="w-full bg-slate-900/50 border border-white/10 rounded-2xl py-3 pl-12 pr-4 focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-all">
        </div>
        <div class="flex items-center gap-6">
            <div class="text-right hidden md:block">
                <p class="text-xs text-gray-500 font-bold uppercase tracking-widest">Global TMDB Key</p>
                <p class="text-sm font-bold text-emerald-500 italic">a4542033...5d2d</p>
            </div>
            <div class="w-10 h-10 rounded-full bg-emerald-500/20 border border-emerald-500/40 flex items-center justify-center text-emerald-500 font-black">Z</div>
        </div>
    </header>

    <section id="hero" class="relative hero-tall w-full overflow-hidden">
        <div id="heroBackdrop" class="absolute inset-0 bg-cover bg-center scale-110 transition-transform duration-[3s]"></div>
        <div class="absolute inset-0 hero-overlay"></div>
        
        <div class="relative z-10 h-full flex flex-col justify-center px-32 animate-slide">
            <div class="flex items-center gap-4 mb-6">
                <span class="bg-emerald-500 text-black font-black text-[10px] px-3 py-1 rounded-full uppercase">Premiere</span>
                <span id="heroRating" class="text-emerald-400 font-bold"></span>
                <span id="heroYear" class="text-gray-400 font-bold"></span>
            </div>
            <h2 id="heroTitle" class="text-7xl md:text-9xl font-extrabold tracking-tighter mb-6 leading-[0.9]"></h2>
            <p id="heroDesc" class="max-w-xl text-lg text-gray-400 font-medium mb-10 line-clamp-3"></p>
            <div class="flex gap-4">
                <button onclick="playHero()" class="bg-emerald-500 text-black px-12 py-5 rounded-2xl font-black flex items-center gap-3 hover:scale-105 transition shadow-lg shadow-emerald-500/30">
                    <i class="fa fa-play text-xl"></i> WATCH NOW
                </button>
                <button onclick="addToWatchlist(hContent)" class="bg-white/5 border border-white/10 backdrop-blur-md px-10 py-5 rounded-2xl font-bold flex items-center gap-2 hover:bg-white/10 transition">
                    <i class="fa fa-plus"></i> WATCHLIST
                </button>
            </div>
        </div>
    </section>

    <main class="pl-32 pr-12 -mt-20 relative z-20 pb-20">
        <div class="flex items-center justify-between mb-12">
            <h3 id="sectionTitle" class="text-4xl font-black tracking-tight">Weekly <span class="text-emerald-500 italic">Highlights</span></h3>
            <div class="flex gap-2">
                <button class="w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center hover:bg-emerald-500/20 transition"><i class="fa fa-chevron-left"></i></button>
                <button class="w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center hover:bg-emerald-500/20 transition"><i class="fa fa-chevron-right"></i></button>
            </div>
        </div>
        
        <div id="grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 2xl:grid-cols-7 gap-8">
            </div>
    </main>

    <div id="playerModal" class="fixed inset-0 z-[200] hidden flex-col overflow-y-auto custom-scroll p-6 md:p-12">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h4 id="mTitle" class="text-4xl font-black tracking-tighter text-emerald-500 uppercase italic"></h4>
                <p id="mMeta" class="text-xs font-bold text-gray-500 uppercase tracking-widest mt-1"></p>
            </div>
            <button onclick="closePlayer()" class="w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center hover:bg-red-500 hover:text-white transition-all text-2xl">
                <i class="fa fa-times"></i>
            </button>
        </div>

        <div class="theater-container bg-black mb-12">
            <iframe id="mainPlayer" src="" allowfullscreen></iframe>
        </div>

        <div class="max-w-7xl mx-auto w-full grid lg:grid-cols-4 gap-12 pb-20">
            <div class="lg:col-span-3 space-y-12">
                <section>
                    <h5 class="text-xs font-black text-emerald-500 uppercase tracking-[0.4em] mb-6">Master Stream Servers</h5>
                    <div id="sourceGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
                        </div>
                </section>

                <section id="tvControls" class="hidden bg-slate-900/50 p-8 rounded-3xl border border-white/5 flex flex-wrap gap-8">
                    <div class="flex-1 min-w-[200px]">
                        <label class="text-[10px] font-black uppercase text-gray-500 mb-3 block">Choose Season</label>
                        <select id="sSelect" onchange="fetchEpisodes()" class="w-full bg-black/40 border border-white/10 p-4 rounded-xl outline-none focus:border-emerald-500"></select>
                    </div>
                    <div class="flex-1 min-w-[200px]">
                        <label class="text-[10px] font-black uppercase text-gray-500 mb-3 block">Choose Episode</label>
                        <select id="eSelect" onchange="updateStream()" class="w-full bg-black/40 border border-white/10 p-4 rounded-xl outline-none focus:border-emerald-500"></select>
                    </div>
                </section>

                <section class="space-y-6">
                    <h5 class="text-2xl font-bold italic">Overview</h5>
                    <p id="mOverview" class="text-gray-400 text-lg leading-relaxed font-light"></p>
                    <div id="castContainer" class="flex flex-wrap gap-3"></div>
                </section>
            </div>

            <aside class="space-y-6">
                <div class="bg-white/5 p-8 rounded-3xl border border-white/5 space-y-8">
                    <div>
                        <p class="text-[10px] font-black text-emerald-500 uppercase mb-1 tracking-widest">Director</p>
                        <p id="mDir" class="text-xl font-bold">--</p>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-emerald-500 uppercase mb-1 tracking-widest">Rating</p>
                        <p id="mRate" class="text-3xl font-black text-white"></p>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-emerald-500 uppercase mb-1 tracking-widest">Released</p>
                        <p id="mDate" class="text-lg font-bold">--</p>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <footer class="pl-32 pr-12 py-20 border-t border-white/5 flex flex-col items-center gap-8">
        <h2 class="text-3xl font-black italic tracking-tighter">ZEN<span class="text-emerald-500">SHOWS</span></h2>
        <div class="flex items-center gap-6 opacity-40 grayscale hover:grayscale-0 transition duration-1000">
            <img src="https://www.themoviedb.org/assets/2/v4/logos/v2/blue_short-8e7b30f73a4020692ccca9c88bafe5dcb6f8a62a4c6bc55cd9ba82bb2cd95f6c.svg" class="h-6">
            <span class="text-[10px] font-bold tracking-widest">CONTENT HUB BY THEMOVIEDB</span>
        </div>
    </footer>

    <script>
        const KEY = 'a45420333457411e78d5ad35d6c51a2d';
        const BASE = 'https://api.themoviedb.org/3';
        const IMG = 'https://image.tmdb.org/t/p/original';
        const P_URL = 'https://image.tmdb.org/t/p/w500';

        let current = { id: '', type: '' };
        let hContent = null;

        window.onload = () => { fetchNew('trending'); };

        async function fetchNew(category) {
            let url = `${BASE}/trending/all/week?api_key=${KEY}`;
            if(category === 'movie') url = `${BASE}/movie/popular?api_key=${KEY}`;
            if(category === 'tv') url = `${BASE}/tv/popular?api_key=${KEY}`;

            const res = await fetch(url);
            const data = await res.json();
            const results = data.results.map(i => ({...i, media_type: i.media_type || category}));
            
            hContent = results[0];
            updateHero(hContent);
            renderGrid(results, category);
        }

        function updateHero(item) {
            const hBg = document.getElementById('heroBackdrop');
            hBg.style.backgroundImage = `url(${IMG + item.backdrop_path})`;
            document.getElementById('heroTitle').innerText = item.title || item.name;
            document.getElementById('heroDesc').innerText = item.overview;
            document.getElementById('heroRating').innerHTML = `<i class="fa fa-star text-emerald-500"></i> ${item.vote_average.toFixed(1)}`;
            document.getElementById('heroYear').innerText = (item.release_date || item.first_air_date || '2024').split('-')[0];
            
            // Trigger animation
            hBg.classList.remove('scale-110');
            setTimeout(() => hBg.classList.add('scale-100'), 100);
        }

        function renderGrid(items, catName) {
            document.getElementById('sectionTitle').innerHTML = `${catName === 'tv' ? 'Series' : 'Cinema'} <span class="text-emerald-500 italic">Spotlight</span>`;
            const grid = document.getElementById('grid');
            grid.innerHTML = items.map(i => `
                <div class="bento-card group relative bg-slate-900 rounded-[2rem] overflow-hidden cursor-pointer shadow-xl" onclick="openPlayer('${i.id}', '${i.media_type}')">
                    <div class="aspect-[2/3] relative overflow-hidden">
                        <img src="${P_URL + i.poster_path}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#020617] via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity p-6 flex flex-col justify-end">
                            <p class="text-emerald-500 text-[10px] font-black uppercase mb-1 tracking-tighter">${i.media_type}</p>
                            <h4 class="font-bold text-sm leading-tight">${i.title || i.name}</h4>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function openPlayer(id, type) {
            current = { id, type };
            const [det, cred] = await Promise.all([
                fetch(`${BASE}/${type}/${id}?api_key=${KEY}`).then(r => r.json()),
                fetch(`${BASE}/${type}/${id}/credits?api_key=${KEY}`).then(r => r.json())
            ]);

            document.getElementById('mTitle').innerText = det.title || det.name;
            document.getElementById('mOverview').innerText = det.overview;
            document.getElementById('mMeta').innerText = `${type} • ${det.genres.map(g => g.name).join(' • ')} • ${det.status}`;
            document.getElementById('mRate').innerText = det.vote_average.toFixed(1);
            document.getElementById('mDate').innerText = det.release_date || det.first_air_date;
            
            const dir = cred.crew.find(c => c.job === 'Director');
            document.getElementById('mDir').innerText = dir ? dir.name : 'Unknown';

            document.getElementById('castContainer').innerHTML = cred.cast.slice(0, 10).map(c => `
                <div class="bg-white/5 px-4 py-2 rounded-xl text-xs font-bold border border-white/5 text-gray-400 hover:text-emerald-500 transition cursor-default">
                    ${c.name}
                </div>
            `).join('');

            if(type === 'tv') {
                document.getElementById('tvControls').classList.remove('hidden');
                document.getElementById('sSelect').innerHTML = det.seasons.map(s => `<option value="${s.season_number}">Season ${s.season_number}</option>`).join('');
                fetchEpisodes();
            } else {
                document.getElementById('tvControls').classList.add('hidden');
            }

            renderSourceButtons();
            document.getElementById('playerModal').classList.replace('hidden', 'flex');
            document.body.style.overflow = 'hidden';
            updateStream(0);
        }

        async function fetchEpisodes() {
            const s = document.getElementById('sSelect').value;
            const res = await fetch(`${BASE}/${current.id}/season/${s}?api_key=${KEY}`);
            const data = await res.json();
            document.getElementById('eSelect').innerHTML = data.episodes.map(e => `<option value="${e.episode_number}">E${e.episode_number}: ${e.name}</option>`).join('');
            updateStream(0);
        }

        function renderSourceButtons() {
            const list = ['VidSrc', 'SuperEmbed', 'CinemaOS', 'Hexa', 'EmbedSu', '2Embed'];
            document.getElementById('sourceGrid').innerHTML = list.map((s, idx) => `
                <button onclick="updateStream(${idx})" class="src-btn p-4 rounded-2xl text-[10px] font-black uppercase tracking-widest">
                    ${s}
                </button>
            `).join('');
        }

        function updateStream(idx) {
            const s = document.getElementById('sSelect').value || 1;
            const e = document.getElementById('eSelect').value || 1;
            const id = current.id;
            
            const urls = [
                current.type === 'movie' ? `https://vidsrc.to/embed/movie/${id}` : `https://vidsrc.to/embed/tv/${id}/${s}/${e}`,
                current.type === 'movie' ? `https://multiembed.mov/?video_id=${id}&tmdb=1` : `https://multiembed.mov/?video_id=${id}&tmdb=1&s=${s}&e=${e}`,
                current.type === 'movie' ? `https://autoembed.to/movie/tmdb/${id}` : `https://autoembed.to/tv/tmdb/${id}-${s}-${e}`,
                current.type === 'movie' ? `https://www.vidbinge.com/embed/movie/${id}` : `https://www.vidbinge.com/embed/tv/${id}/${s}/${e}`,
                current.type === 'movie' ? `https://embed.su/embed/movie/${id}` : `https://embed.su/embed/tv/${id}/${s}/${e}`,
                current.type === 'movie' ? `https://www.2embed.cc/embed/${id}` : `https://www.2embed.cc/embedtv/${id}&s=${s}&e=${e}`
            ];

            document.getElementById('mainPlayer').src = urls[idx];
            document.querySelectorAll('.src-btn').forEach((b, i) => i === idx ? b.classList.add('active-src') : b.classList.remove('active-src'));
        }

        async function handleSearch(e) {
            if(e.key === 'Enter') {
                const q = document.getElementById('searchInput').value;
                const res = await fetch(`${BASE}/search/multi?api_key=${KEY}&query=${q}`);
                const data = await res.json();
                renderGrid(data.results.filter(i => i.poster_path), 'Search');
                window.scrollTo({top: 800, behavior: 'smooth'});
            }
        }

        function closePlayer() {
            document.getElementById('playerModal').classList.replace('flex', 'hidden');
            document.getElementById('mainPlayer').src = '';
            document.body.style.overflow = 'auto';
        }

        function playHero() { openPlayer(hContent.id, hContent.media_type); }
    </script>
</body>
</html>
