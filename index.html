<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZenShows X | Premium Cinema</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap');
        
        :root { --accent: #00f2ff; --bg: #050505; }
        body { font-family: 'Space Grotesk', sans-serif; background-color: var(--bg); color: white; overflow-x: hidden; }

        /* Ultra-Wide Design */
        .container-fluid { width: 100%; padding: 0 4%; }
        
        /* Glassmorphism Player */
        .theater-overlay {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 999;
        }

        .video-container {
            width: 100%;
            max-width: 1400px;
            aspect-ratio: 16/9;
            background: #000;
            border: 1px solid rgba(0, 242, 255, 0.2);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0, 242, 255, 0.1);
        }

        /* Movie Card Premium */
        .movie-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        .movie-card:hover { transform: scale(1.05); }
        .movie-card img { border-radius: 15px; }

        /* Source Buttons */
        .source-pill {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s;
        }
        .source-pill.active {
            background: var(--accent);
            color: black;
            font-weight: bold;
            box-shadow: 0 0 15px var(--accent);
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #1a1a1a; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent); }
    </style>
</head>
<body>

    <nav class="fixed top-0 w-full z-50 bg-black/50 backdrop-blur-md border-b border-white/5 px-8 py-4 flex justify-between items-center">
        <h1 class="text-3xl font-bold tracking-tighter text-cyan-400">ZEN<span class="text-white">SHOWS X</span></h1>
        
        <div class="flex-grow max-w-2xl mx-12">
            <div class="relative">
                <input type="text" id="searchInput" onkeyup="if(event.key==='Enter')search()" placeholder="Search movies or TV shows..." 
                    class="w-full bg-white/5 border border-white/10 rounded-full py-2 px-6 outline-none focus:border-cyan-400 transition-all">
                <i class="fa fa-search absolute right-5 top-3 text-gray-500"></i>
            </div>
        </div>

        <div class="flex gap-6 text-sm font-medium text-gray-400">
            <button onclick="loadSection('trending')" class="hover:text-cyan-400">Trending</button>
            <button onclick="loadSection('movie')" class="hover:text-cyan-400">Movies</button>
            <button onclick="loadSection('tv')" class="hover:text-cyan-400">TV Shows</button>
        </div>
    </nav>

    <header id="hero" class="relative h-[85vh] flex items-center px-[4%] overflow-hidden pt-20">
        <div id="heroBg" class="absolute inset-0 bg-cover bg-center transition-all duration-700 brightness-[0.4] scale-110"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-[#050505] via-transparent to-transparent"></div>
        
        <div class="relative z-10 max-w-3xl">
            <h2 id="heroTitle" class="text-7xl font-bold mb-4 tracking-tighter leading-none"></h2>
            <div class="flex items-center gap-4 mb-6 text-cyan-400 font-bold">
                <span id="heroYear"></span>
                <span id="heroRating" class="bg-cyan-400/10 px-3 py-1 rounded"></span>
            </div>
            <p id="heroDesc" class="text-gray-300 text-lg mb-8 line-clamp-3"></p>
            <button onclick="playHero()" class="bg-cyan-400 text-black px-12 py-4 rounded-full font-bold text-lg hover:scale-105 transition shadow-lg shadow-cyan-400/20">
                <i class="fa fa-play mr-2"></i> Watch Now
            </button>
        </div>
    </header>

    <main class="container-fluid -mt-32 relative z-20 pb-20">
        <h3 id="gridTitle" class="text-2xl font-bold mb-8">Featured Content</h3>
        <div id="grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-6"></div>
    </main>

    <div id="playerUI" class="fixed inset-0 theater-overlay hidden flex-col overflow-y-auto">
        <div class="p-6 flex justify-between items-center">
            <div>
                <h2 id="playTitle" class="text-3xl font-bold">Title</h2>
                <p id="playMeta" class="text-cyan-400 font-medium uppercase text-xs tracking-widest"></p>
            </div>
            <button onclick="closePlayer()" class="w-12 h-12 rounded-full bg-white/5 hover:bg-red-500 transition flex items-center justify-center">
                <i class="fa fa-times text-xl"></i>
            </button>
        </div>

        <div class="flex flex-col items-center p-4">
            <div class="video-container">
                <iframe id="mainFrame" src="" 
                    allowfullscreen="true" 
                    webkitallowfullscreen="true" 
                    mozallowfullscreen="true"
                    sandbox="allow-forms allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation"
                    scrolling="no">
                </iframe>
            </div>

            <div id="tvControls" class="mt-8 hidden w-full max-w-[1400px] grid grid-cols-2 gap-4">
                <select id="sSelect" onchange="updateEpisodes()" class="bg-white/5 border border-white/10 p-4 rounded-xl outline-none"></select>
                <select id="eSelect" onchange="switchSource(0)" class="bg-white/5 border border-white/10 p-4 rounded-xl outline-none"></select>
            </div>

            <div class="mt-8 w-full max-w-[1400px]">
                <p class="text-xs font-bold text-gray-500 uppercase mb-4">Select Mirror Server</p>
                <div id="sourceList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3">
                    <button onclick="switchSource(0)" class="source-pill p-4 rounded-xl text-xs font-bold active">VidSrc.to</button>
                    <button onclick="switchSource(1)" class="source-pill p-4 rounded-xl text-xs font-bold">VidSrc.me</button>
                    <button onclick="switchSource(2)" class="source-pill p-4 rounded-xl text-xs font-bold">SuperEmbed</button>
                    <button onclick="switchSource(3)" class="source-pill p-4 rounded-xl text-xs font-bold">AutoEmbed</button>
                    <button onclick="switchSource(4)" class="source-pill p-4 rounded-xl text-xs font-bold">EmbedSu</button>
                    <button onclick="switchSource(5)" class="source-pill p-4 rounded-xl text-xs font-bold">VidSrc.pro</button>
                </div>
            </div>

            <div class="mt-12 w-full max-w-[1400px] grid md:grid-cols-3 gap-12 pb-20">
                <div class="md:col-span-2">
                    <h4 class="text-xl font-bold mb-4">Synopsis</h4>
                    <p id="playDesc" class="text-gray-400 leading-relaxed"></p>
                    <div id="castList" class="flex flex-wrap gap-2 mt-6"></div>
                </div>
                <div class="bg-white/5 p-8 rounded-2xl h-fit">
                    <div class="mb-4">
                        <p class="text-xs text-cyan-400 uppercase font-bold">Director</p>
                        <p id="playDir" class="text-lg">--</p>
                    </div>
                    <div>
                        <p class="text-xs text-cyan-400 uppercase font-bold">User Score</p>
                        <p id="playRate" class="text-2xl font-bold">--</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = 'a45420333457411e78d5ad35d6c51a2d';
        const BASE = 'https://api.themoviedb.org/3';
        const IMG = 'https://image.tmdb.org/t/p/original';
        
        let current = { id: '', type: '' };
        let hData = null;

        window.onload = () => loadSection('trending');

        async function loadSection(type) {
            let url = `${BASE}/trending/all/day?api_key=${API_KEY}`;
            if(type === 'movie') url = `${BASE}/movie/popular?api_key=${API_KEY}`;
            if(type === 'tv') url = `${BASE}/tv/popular?api_key=${API_KEY}`;

            const res = await fetch(url);
            const data = await res.json();
            const results = data.results.map(i => ({...i, media_type: i.media_type || type}));
            
            hData = results[0];
            updateHero(hData);
            renderGrid(results);
        }

        function updateHero(item) {
            document.getElementById('heroBg').style.backgroundImage = `url(${IMG + item.backdrop_path})`;
            document.getElementById('heroTitle').innerText = item.title || item.name;
            document.getElementById('heroDesc').innerText = item.overview;
            document.getElementById('heroRating').innerText = `★ ${item.vote_average.toFixed(1)}`;
            document.getElementById('heroYear').innerText = (item.release_date || item.first_air_date || '2024').split('-')[0];
        }

        function renderGrid(items) {
            const grid = document.getElementById('grid');
            grid.innerHTML = items.map(i => `
                <div class="movie-card cursor-pointer" onclick="openMedia('${i.id}', '${i.media_type}')">
                    <img src="https://image.tmdb.org/t/p/w500${i.poster_path}" class="w-full">
                    <div class="mt-3">
                        <p class="font-bold text-sm truncate">${i.title || i.name}</p>
                        <p class="text-xs text-gray-500 font-medium">${(i.release_date || i.first_air_date || '').split('-')[0]} • ${i.media_type}</p>
                    </div>
                </div>
            `).join('');
        }

        async function openMedia(id, type) {
            current = { id, type };
            const [det, cred] = await Promise.all([
                fetch(`${BASE}/${type}/${id}?api_key=${API_KEY}`).then(r => r.json()),
                fetch(`${BASE}/${type}/${id}/credits?api_key=${API_KEY}`).then(r => r.json())
            ]);

            document.getElementById('playTitle').innerText = det.title || det.name;
            document.getElementById('playDesc').innerText = det.overview;
            document.getElementById('playMeta').innerText = det.genres.map(g => g.name).join(' / ');
            document.getElementById('playRate').innerText = `${det.vote_average.toFixed(1)} / 10`;
            
            const dir = cred.crew.find(c => c.job === 'Director');
            document.getElementById('playDir').innerText = dir ? dir.name : 'Unknown';
            document.getElementById('castList').innerHTML = cred.cast.slice(0, 8).map(c => `<span class="bg-white/10 px-3 py-1 rounded-full text-xs">${c.name}</span>`).join('');

            if(type === 'tv') {
                document.getElementById('tvControls').classList.remove('hidden');
                document.getElementById('sSelect').innerHTML = det.seasons.map(s => `<option value="${s.season_number}">Season ${s.season_number}</option>`).join('');
                await updateEpisodes();
            } else {
                document.getElementById('tvControls').classList.add('hidden');
                switchSource(0);
            }

            document.getElementById('playerUI').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        async function updateEpisodes() {
            const s = document.getElementById('sSelect').value;
            const res = await fetch(`${BASE}/tv/${current.id}/season/${s}?api_key=${API_KEY}`);
            const data = await res.json();
            document.getElementById('eSelect').innerHTML = data.episodes.map(e => `<option value="${e.episode_number}">Episode ${e.episode_number}: ${e.name}</option>`).join('');
            switchSource(0);
        }

        function switchSource(idx) {
            const s = document.getElementById('sSelect').value || 1;
            const e = document.getElementById('eSelect').value || 1;
            const id = current.id;
            
            // CORRECTED 2025 URL STRUCTURES
            const urls = [
                current.type === 'movie' ? `https://vidsrc.to/embed/movie/${id}` : `https://vidsrc.to/embed/tv/${id}/${s}/${e}`,
                current.type === 'movie' ? `https://vidsrc.me/embed/movie?tmdb=${id}` : `https://vidsrc.me/embed/tv?tmdb=${id}&sea=${s}&epi=${e}`,
                current.type === 'movie' ? `https://multiembed.mov/?video_id=${id}&tmdb=1` : `https://multiembed.mov/?video_id=${id}&tmdb=1&s=${s}&e=${e}`,
                current.type === 'movie' ? `https://autoembed.to/movie/tmdb/${id}` : `https://autoembed.to/tv/tmdb/${id}-${s}-${e}`,
                current.type === 'movie' ? `https://embed.su/embed/movie/${id}` : `https://embed.su/embed/tv/${id}/${s}/${e}`,
                current.type === 'movie' ? `https://vidsrc.pro/embed/movie/${id}` : `https://vidsrc.pro/embed/tv/${id}/${s}/${e}`
            ];

            document.getElementById('mainFrame').src = urls[idx];
            
            // Update UI buttons
            document.querySelectorAll('.source-pill').forEach((btn, i) => {
                if(i === idx) btn.classList.add('active');
                else btn.classList.remove('active');
            });
        }

        async function search() {
            const q = document.getElementById('searchInput').value;
            const res = await fetch(`${BASE}/search/multi?api_key=${API_KEY}&query=${q}`);
            const data = await res.json();
            renderGrid(data.results.filter(i => i.poster_path));
            window.scrollTo({top: 800, behavior: 'smooth'});
        }

        function closePlayer() {
            document.getElementById('playerUI').classList.add('hidden');
            document.getElementById('mainFrame').src = '';
            document.body.style.overflow = 'auto';
        }

        function playHero() { openMedia(hData.id, hData.media_type); }
    </script>
</body>
</html>
